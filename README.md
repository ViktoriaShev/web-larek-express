# Проект: Web-ларёк. Тёмная сторона

#### Цель проекта — разработать бэкенд для сервиса интернет-магазина «Web-ларёк», включая сервер для работы с товарами, авторизацией пользователей и их взаимодействием с приложением. Важно реализовать всё, что связано с управлением товарами, а также интегрировать механизмы авторизации через JWT-токены и refresh-токены, обработку ошибок и логи.

## Основные этапы реализации:
### Создание Express-сервера:
Разработка сервера на базе Express.js с поддержкой TypeScript. \
Реализация команд для запуска сервера с горячей перезагрузкой, сборки и запуска приложения с помощью ts-node-dev.\
В настройках сервера используется пакет cors для решения проблем с кросс-доменных запросов.

### Подключение базы данных MongoDB:
Использование MongoDB для хранения данных, включая товары и заказы. 

### Реализация подключения к базе данных и создание коллекции товаров с полями:

title — название товара.\
image — путь и метаинформация о картинке товара.\
category — категория товара.\
description — описание товара.\
price — цена товара (опционально).\
Создание схемы товара с валидацией и уникальностью полей.

###Создание контроллеров и роутов:

#### Разработка API с двумя ключевыми роута:

GET /product — для получения списка всех товаров.\
POST /product — для добавления нового товара. \

Реализация загрузки изображений с сервера с использованием статической папки public.
Для создания заказа добавлен маршрут POST /order, который проверяет данные перед созданием заказа.

### Обработка ошибок и валидация данных:

Реализация централизованного обработчика ошибок с использованием мидлваров.\
Обработка различных ошибок (например, 400 — некорректные данные, 404 — несуществующий маршрут, 409 — дублирующиеся товары).\
Валидация данных с помощью библиотек Celebrate и Joi для проверки правильности передаваемых данных (например, в теле запроса при создании товара или заказа).

### Логирование запросов и ошибок:

Логирование всех запросов и ошибок в файлы request.log и error.log с помощью библиотеки express-winston.
Логи сохраняются в формате JSON для удобства анализа.

### JWT-авторизация:

Реализация системы авторизации с использованием JWT (JSON Web Tokens).
Разработка системы refresh-токенов для обновления токенов и обеспечения безопасности.

### Админка и управление товарами:

В административной части проекта реализована возможность добавления, редактирования и удаления товаров.
Реализация админской панели для управления контентом и пользователями (потребуется создание дополнительной ветки admin).

## Структура проекта:
src — исходный код проекта:\
app.ts — точка входа в приложение.\
models — схемы и модели для товаров.\
controllers — логика для работы с товарами и заказами.\
routes — маршруты API.\
middlewares — мидлвары для валидации и обработки ошибок.\
errors — кастомные классы ошибок.\
public — статические файлы (изображения, иконки).\
config.ts — конфигурация и настройки сервера.\
.env — файл с переменными окружения для работы с сервером и базой данных.\
logs — директории для логирования запросов и ошибок (request.log, error.log).

## Задачи для реализации:
- Разработать бэкенд для работы с товарами и заказами, реализовав CRUD-операции.\
- Реализовать централизованную обработку ошибок и их логирование.\
- Подключить базу данных MongoDB и создать соответствующие модели.\
- Настроить валидацию данных, как на уровне запроса, так и на уровне схемы.\
- Разработать систему авторизации с использованием JWT.\
- Реализовать логику для администрирования товаров и заказов.

## Технологии и инструменты:
Express.js — для создания RESTful API.\
MongoDB и Mongoose — для работы с базой данных.\
TypeScript — для написания типизированного кода.\
Celebrate и Joi — для валидации данных.\
JWT — для авторизации и безопасности.\
express-winston — для логирования запросов и ошибок.
